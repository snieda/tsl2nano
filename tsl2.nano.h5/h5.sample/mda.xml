<?xml version="1.0" encoding="UTF-8"?>
<project name="model driven generator" default="do.all" basedir=".">
	<property file="mda.properties" />
	<target name="help" description="help overview">
		<echo message="please use one of these targets: sql"/>
	</target>

	<path id="stdpath">
		<fileset dir="${basedir}">
			<include name="**"/>
		</fileset>
	</path>
	<path id="classpath">
		<fileset dir="${basedir}">
			<include name="**/*.jar"/>
			<include name="**/*.class"/>
		</fileset>
	</path>
	<target name="do.all" description="creates database from ddl and entity beans from jdbc-connection">
		<property file="jdbc-connection.properties"/>
	
	<!-- start the database with name ${basedir} -->
	
		<parallel>
			<ant antfile="shell.xml" target="sh.exec.cmd">
				<property name="sh.exec.cmd.dir" value="${basedir}"/>
				<property name="sh.exec.cmd.arg1" value="start"/>
				<property name="sh.exec.cmd.arg2" value="runServer.bat"/>
				<property name="sh.exec.cmd.arg3" value="${basedir}"/>
			</ant>
			<sequential>
				<property name="sh.sleep.milliseconds" value="3000" />
				<ant antfile="shell.xml" target="sh.sleep"/>
				<ant antfile="shell.xml" target="sh.sql">
					<!-- <property name="sh.sql.include" value="h5.sample.sql"/> -->
				</ant>
				
				<ant antfile="hibtool.xml" />
				
				<ant antfile="shell.xml" target="sh.exec.cmd">
					<property name="sh.exec.cmd.dir" value="${basedir}/.."/>
					<property name="sh.exec.cmd.arg1" value="start"/>
					<property name="sh.exec.cmd.arg2" value="start.bat"/>
				</ant>
			</sequential>
		</parallel>
	</target>

</project>	